<?php
class Vehiculos extends CI_Controller
{
	public $char_error_open;
	public $char_error_close;
	public $session_data;
	public $success;
    public $error_msg;
	function __construct()
	{
		parent::__construct();
		$this->load->model('vehicles','',TRUE);
		$this->char_error_open = '<span class="btn btn-danger btn-xs" style="margin:3px;"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true"> &nbsp;×</button>';
		$this->char_error_close = '</span>';
 		 $this->success = '';
        $this->error_msg = '';
        $this->name_img = '';
		if($this->session->userdata('logged_in'))
		{	
			$this->session_data = $this->session->userdata('logged_in');
		}
		else
		{
			redirect('login','refresh');
		}
	}
	public function nuevo(){
		$this->form_validation->set_error_delimiters($this->char_error_open,$this->char_error_close);
		$this->form_validation->set_rules('txt_matricula', 'Matricula', 'required|trim|xss_clean|exact_length[10]');
		$this->form_validation->set_rules('txt_numMotor','N° Motor', 'required|trim|xss_clean');
		$this->form_validation->set_rules('cmb_Marca','Marca', 'required|trim|xss_clean');
		$this->form_validation->set_rules('cmb_Modelo','Modelo', 'required|trim|xss_clean|xss_clean');
		$this->form_validation->set_rules('txt_color', 'Color', 'trim|required|xss_clean');
		$this->form_validation->set_rules('txt_numPasajeros', 'N° Pasajeros', 'trim|required|xss_clean|numeric');
		$this->form_validation->set_rules('txt_numPuertas', 'N° Puertas', 'trim|required|xss_clean|numeric');
		$this->form_validation->set_rules('btn_file', 'Imagen', 'trim|required|xss_clean');
		$this->form_validation->set_message('required', 'El  %s es requerido');
		if($this->form_validation->run() === TRUE){
			Echo "valio dick";
		}
		
			
			$data['nombre'] = $this->session_data['nombre'];
			$data['apellido'] = $this->session_data['apellido'];
			$data['usuario_i'] = $this->session_data['usuario_i'];
			$data['imagen_perfil'] = $this->session_data['imagen_perfil'];
			$data['success'] = $this->success;
			$data['error'] = $this->error_msg;
            $data['titulo'] = 'Agregar Vehiculo';
			$data['content']  = 'nuevo_vehiculo';
			$this->load->view('main_template',$data);
		
	}
	
}
